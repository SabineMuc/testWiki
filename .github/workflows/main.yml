name: Publis DXP


on:
  workflow_dispatch
  
jobs:
  PrepareWiki:
    name: get Wiki
    runs-on: ubuntu-latest
    steps: 
      - name: Checkout base code
        uses: actions/checkout@v2
        with:
          path: base-code
      - name: Checkout wiki code
        uses: actions/checkout@v2
        with:
          repository: ${{github.repository}}.wiki
          path: markdown
          
      # Here we use the private Action 
      - name: List files in the repository
        run: |
          echo ${{ github.workspace }}
          ls -a ${{ github.workspace }}
      - run: echo "üçè This job's status is ${{ job.status }}."
      - run: |
          pip install mkdocs-material      
      - run: |      
          cd ${{ github.workspace }}/base-code
          mkdir docs
          mkdocs build --config-file ${{ github.workspace }}/base-code/mkdocs.yml --site-dir site
      - run: |          
          mkdocs gh-deploy --config-file ${{ github.workspace }}/base-code/mkdocs.yml
      - run: |          
          cd ${{ github.workspace }}
          git pull
          git add site
          git commit -m "sdfsdf"
          git push
